function MainRouter(a,b){a.state("home",{url:"/",templateUrl:"./js/views/home.html"}).state("login",{url:"/login",templateUrl:"./js/views/authentications/login.html"}).state("register",{url:"/register",templateUrl:"./js/views/authentications/register.html"}).state("users",{url:"/users",templateUrl:"./js/views/users/index.html"}).state("user",{url:"/users/:id",templateUrl:"./js/views/users/show.html",controller:function(a,b,c){c.get({id:b.id},function(b){a.$parent.users.user=b.user})}}),b.otherwise("/")}function UsersController(a,b,c){function d(){a.query(function(a){k.all=a.users})}function e(a){var d=a.token?a.token:null;d&&(k.getUsers(),c.go("home")),k.currentUser=b.getUser()}function f(a){k.error="Something went wrong."}function g(){a.register(k.user,e,f)}function h(){a.login(k.user,e,f)}function i(){k.all=[],k.currentUser=null,b.clearUser()}function j(){return k.currentUser=b.getUser(),!!k.currentUser}var k=this;return k.all=[],k.user=null,k.currentUser=null,k.error=null,k.getUsers=d,k.register=g,k.login=h,k.logout=i,k.checkLoggedIn=j,j()&&k.getUsers(),k}function User(a,b){return a(b+"/users/:id",{id:"@id"},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!1},remove:{method:"DELETE"},"delete":{method:"DELETE"},register:{url:b+"/register",method:"POST"},login:{url:b+"/login",method:"POST"}})}function AuthInterceptor(a,b){return{request:function(c){var d=b.getToken();return 0===c.url.indexOf(a)&&d&&(c.headers.Authorization="Bearer "+d),c},response:function(c){return console.log(c),0===c.config.url.indexOf(a)&&c.data.token&&b.setToken(c.data.token),c}}}function CurrentUser(a){function b(){return d.user?d.user:a.decodeToken()}function c(){a.removeToken(),d.user=null}var d=this;d.getUser=b,d.clearUser=c,d.user=b()}function TokenService(a,b){function c(b){return a.localStorage.setItem("auth-token",b)}function d(){return a.localStorage["auth-token"]}function e(){return a.localStorage.removeItem("auth-token")}function f(){var a=g.getToken();if(a){var c=b.decodeToken(a);return a?c._doc:null}}var g=this;g.setToken=c,g.getToken=d,g.removeToken=e,g.decodeToken=f}angular.module("logging",["angular-jwt","ngResource","ui.router"]).constant("API","http://localhost:3000/api").config(MainRouter).config(function(a){a.interceptors.push("authInterceptor")}),MainRouter.$inject=["$stateProvider","$urlRouterProvider"],angular.module("logging").controller("UsersController",UsersController),UsersController.$inject=["User","CurrentUser","$state"],angular.module("logging").factory("User",User),User.$inject=["$resource","API"],angular.module("logging").factory("authInterceptor",AuthInterceptor),AuthInterceptor.$inject=["API","TokenService"],angular.module("logging").service("CurrentUser",CurrentUser),CurrentUser.$inject=["TokenService"],angular.module("logging").service("TokenService",TokenService),TokenService.$inject=["$window","jwtHelper"];